# üß± AI Template Project Context

–≠—Ç–æ—Ç –ø—Ä–æ–µ–∫—Ç `ai-template` ‚Äî –±–∞–∑–æ–≤—ã–π —à–∞–±–ª–æ–Ω –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è –ø—Ä–æ–¥–∞–∫—à–Ω-–≥–æ—Ç–æ–≤—ã—Ö AI‚Äë–±–æ—Ç–æ–≤ –∏ —Å–µ—Ä–≤–∏—Å–æ–≤ –Ω–∞ Python.

## üöÇ –î–µ–ø–ª–æ–π n8n –Ω–∞ Railway (ai-pe-n8n-01)

–ß—Ç–æ–±—ã **workflow –∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ n8n –Ω–µ –ø—Ä–æ–ø–∞–¥–∞–ª–∏** –ø–æ—Å–ª–µ –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫–∞ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞, –Ω–∞ Railway –Ω—É–∂–Ω–æ –≤–∫–ª—é—á–∏—Ç—å persistent volume:

1. –í –ø—Ä–æ–µ–∫—Ç–µ Railway –æ—Ç–∫—Ä–æ–π —Å–µ—Ä–≤–∏—Å —Å n8n.
2. –í–∫–ª–∞–¥–∫–∞ **Variables** ‚Äî –¥–æ–±–∞–≤—å –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ (–≤ —Ç.—á. `WEBHOOK_URL` –Ω–∞ –ø—É–±–ª–∏—á–Ω—ã–π –¥–æ–º–µ–Ω).
3. –í–∫–ª–∞–¥–∫–∞ **Settings** ‚Üí —Ä–∞–∑–¥–µ–ª **Volumes** (–∏–ª–∏ **Persistent Storage**):
   - –ù–∞–∂–º–∏ **Add Volume**.
   - **Mount Path** –∑–∞–¥–∞–π —Å—Ç—Ä–æ–≥–æ: **`/home/node/.n8n`** ‚Äî —Ç—É–¥–∞ n8n –ø–∏—à–µ—Ç –∫–æ–Ω—Ñ–∏–≥, –ë–î –∏ workflow.
   - –°–æ—Ö—Ä–∞–Ω–∏ –∏ –ø–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏ –¥–µ–ø–ª–æ–π.

–ë–µ–∑ —ç—Ç–æ–≥–æ –º–æ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –ø—Ä–∏ –∫–∞–∂–¥–æ–º —Ä–µ—Å—Ç–∞—Ä—Ç–µ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä –ø–æ–ª—É—á–∞–µ—Ç –ø—É—Å—Ç–æ–π –¥–∏—Å–∫ ‚Äî –ø—Ä–æ–µ–∫—Ç –Ω–µ —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è.

**–ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –¥–ª—è Railway (Variables):**

- `WEBHOOK_URL` ‚Äî –ø—É–±–ª–∏—á–Ω—ã–π URL (–Ω–∞–ø—Ä–∏–º–µ—Ä `https://<—Ç–≤–æ–π-—Å–µ—Ä–≤–∏—Å>.up.railway.app`).
- –í –æ–±—Ä–∞–∑ —É–∂–µ –∑–∞—à–∏—Ç–æ `N8N_PROXY_HOPS=1` ‚Äî —á—Ç–æ–±—ã –∑–∞ –ø—Ä–æ–∫—Å–∏ Railway –Ω–µ –±—ã–ª–æ –æ—à–∏–±–∫–∏ *X-Forwarded-For / trust proxy*.

**–ï—Å–ª–∏ –≤ –ª–æ–≥–∞—Ö ¬´User attempted to access a workflow without permissions¬ª:** –≤ n8n 2.x –µ—Å—Ç—å –ø—Ä–æ–µ–∫—Ç—ã –∏ —Ä–æ–ª–∏. –ó–∞–π–¥–∏ –≤ –ø—Ä–æ–µ–∫—Ç (–Ω–∞–ø—Ä–∏–º–µ—Ä Default), —Å–æ–∑–¥–∞–π workflow —Ç–∞–º –∏–ª–∏ –¥–æ–±–∞–≤—å —Å–µ–±—è –≤ –Ω—É–∂–Ω—ã–π –ø—Ä–æ–µ–∫—Ç. Owner —Å–æ–∑–¥–∞—ë—Ç—Å—è –ø—Ä–∏ –ø–µ—Ä–≤–æ–º –∑–∞—Ö–æ–¥–µ ‚Äî –¥–∞–ª—å—à–µ –≤—Å–µ workflow –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å –≤ –ø—Ä–æ–µ–∫—Ç–µ, –∫ –∫–æ—Ç–æ—Ä–æ–º—É —É –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –µ—Å—Ç—å –¥–æ—Å—Ç—É–ø.

**–ï—Å–ª–∏ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä –ø–æ–ª—É—á–∞–µ—Ç SIGTERM –≤–æ –≤—Ä–µ–º—è –º–∏–≥—Ä–∞—Ü–∏–π:** –ø–µ—Ä–≤—ã–π —Å—Ç–∞—Ä—Ç –º–æ–∂–µ—Ç –±—ã—Ç—å –¥–æ–ª–≥–∏–º. –ü—Ä–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏ —É–≤–µ–ª–∏—á—å timeout –¥–µ–ø–ª–æ—è –≤ Railway –∏–ª–∏ –ø–æ–¥–æ–∂–¥–∏ –ø–æ–≤—Ç–æ—Ä–Ω–æ–≥–æ –¥–µ–ø–ª–æ—è ‚Äî –ø–æ—Å–ª–µ –ø–µ—Ä–≤–æ–≥–æ –ø—Ä–æ–≥–æ–Ω–∞ –º–∏–≥—Ä–∞—Ü–∏–π —Å—Ç–∞—Ä—Ç –±—É–¥–µ—Ç –±—ã—Å—Ç—Ä–µ–µ.

## üéØ –¶–µ–ª—å —à–∞–±–ª–æ–Ω–∞
- –î–∞—Ç—å —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–π —Å–∫–µ–ª–µ—Ç –ø—Ä–æ–µ–∫—Ç–∞: —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–π, –∫–æ–Ω—Ñ–∏–≥–∏, Makefile, docker-compose.
- –£–ø–∞–∫–æ–≤–∞—Ç—å –ª—É—á—à–∏–µ –ø—Ä–∞–∫—Ç–∏–∫–∏: `asyncio`, Pydantic Settings, `loguru`, –∑–∞–≥—Ä—É–∑–∫–∞ `.env`.
- –û–±–µ—Å–ø–µ—á–∏—Ç—å –±—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç –¥–ª—è Telegram-–±–æ—Ç–æ–≤ –∏ –¥—Ä—É–≥–∏—Ö AI-—Å–µ—Ä–≤–∏—Å–æ–≤ –±–µ–∑ –∫–æ–ø–∏–ø–∞—Å—Ç–∞.

## üìÇ –ö–ª—é—á–µ–≤–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞
- `src/main.py` ‚Äî –º–∏–Ω–∏–º–∞–ª—å–Ω–∞—è async-—Ç–æ—á–∫–∞ –≤—Ö–æ–¥–∞ (Telegram bot skeleton).
- `src/config.py` ‚Äî –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è —á–µ—Ä–µ–∑ `pydantic-settings.BaseSettings` –∏ `.env`.
- `Makefile` ‚Äî –µ–¥–∏–Ω–∞—è —Ç–æ—á–∫–∞ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è (install, run, docker-up/down, clean).
- `docker-compose.yml` ‚Äî –±–∞–∑–æ–≤—ã–π —Å–µ—Ä–≤–∏—Å `bot` –¥–ª—è –ª–æ–∫–∞–ª—å–Ω–æ–≥–æ/dev –æ–∫—Ä—É–∂–µ–Ω–∏—è.

## üîê –°–µ–∫—Ä–µ—Ç—ã –∏ –æ–∫—Ä—É–∂–µ–Ω–∏—è
- –í—Å–µ –∫–ª—é—á–∏ –∏ —Ç–æ–∫–µ–Ω—ã –±–µ—Ä—É—Ç—Å—è —Ç–æ–ª—å–∫–æ –∏–∑ `.env`.
- –í —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–∏ —Ö—Ä–∞–Ω–∏—Ç—Å—è —Ç–æ–ª—å–∫–æ `.env.example` –±–µ–∑ —Ä–µ–∞–ª—å–Ω—ã—Ö –∑–Ω–∞—á–µ–Ω–∏–π.
- –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é:
  - `TELEGRAM_TOKEN`
  - `OPENAI_API_KEY`
  - `ENVIRONMENT` (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é `local`)

## üöÄ –¢–∏–ø–∏—á–Ω—ã–π —Ñ–ª–æ—É —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏
1. –°–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å —à–∞–±–ª–æ–Ω `ai-template` –ø–æ–¥ –Ω–æ–≤—ã–π –ø—Ä–æ–µ–∫—Ç.
2. –°–æ–∑–¥–∞—Ç—å `.venv`, —É—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏: `make install`.
3. –ù–∞—Å—Ç—Ä–æ–∏—Ç—å `.env` –Ω–∞ –æ—Å–Ω–æ–≤–µ `.env.example`.
4. –ó–∞–ø—É—Å—Ç–∏—Ç—å –ª–æ–∫–∞–ª—å–Ω–æ: `make run` –∏–ª–∏ —á–µ—Ä–µ–∑ Docker: `docker-compose up bot`.

